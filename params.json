{"name":"kvmtop","tagline":"Monitor virtual machine experience from outside on KVM hypervisor level","body":"# kvmtop [![Build Status](https://travis-ci.org/cha87de/kvmtop.svg)](https://travis-ci.org/cha87de/kvmtop)\r\n\r\n## Find latest release\r\nhttps://github.com/cha87de/kvmtop/releases/latest\r\n\r\nDownload 64 bit Binary here\r\nhttps://github.com/cha87de/kvmtop/releases/download/1.0/kvmtop\r\n\r\n## What kvmtop does\r\nIt reads utilisation metrics about virtual machines\r\nrunning on the KVM hypervisor from different sources:\r\n - the Linux /proc filesystem\r\n - using the virsh [1] tool\r\n\r\nWhy yet another monitoring tool for virtual machines?\r\n\r\nThe CPU measurements are read directly from the hypervisors Linux kernel. kvmtop takes\r\ninto account the difference between CPU utilisation inside and outside the virtual machine,\r\nwhich will differ e.g. in cases of cpu over provisioning. kvmtop also collects \r\nutilisation values of the hypervisor for virtual machines, to measure the overhead needed\r\nto run a virtual machine.\r\n\r\n[1] http://linux.die.net/man/1/virsh\r\n\r\n## Usage\r\n\r\n```\r\nkvmtop --help\r\nUsage of bin/kvmtop:\r\n  -batch\r\n    \tuse simple output e.g. for scripts (default: false)\r\n  -cpu\r\n    \tshow cpu (default: true) (default true)\r\n  -disk\r\n    \tshow disk  (default: false)\r\n  -memory\r\n    \tshow memory (default: false)\r\n  -network\r\n    \tshow network (default: false)\r\n  -qemu-binary-name string\r\n    \tbinary name of qemu driver. default qemu-kvm (default \"qemu-kvm\")\r\n  -r int\r\n    \truns x times then terminates. default -1 (runs forever) (default -1)\r\n  -s int\r\n    \tsleep n seconds between runs. default 1s (default 1)\r\n  -uuid\r\n    \tshow uuid  (default: false)\r\n  -version\r\n    \tshow version\r\n```\r\n\r\nExemplary output\r\n```\r\nvmname CpuCS CpuVM CpuPM CpuST CpuIO ram-used ram-total\r\nvm1    2     5%    5%    0%    1%    1024MB   1024MB\r\nvm2    4     15%   15%   0%    1%    1024MB   1024MB\r\n```\r\n\r\n## Setup developer workspace or compile kvmtop\r\n\r\n```\r\nmkdir kvmtop && cd kvmtop\r\ngo get \"github.com/cha87de/kvmtop\"\r\ngo get \"github.com/rthornton128/goncurses\"\r\nexport GOPATH=`pwd`\r\ngo install github.com/cha87de/kvmtop\r\n```\r\n\r\nThe `go install` will produce a binary located at ./bin/kvmtop\r\n\r\n\r\n# Export Schedstat from Kernel\r\n\r\nIn CENTOS7 Kernel, the schedstats are not exported any more [1][2].\r\nOne way of installing a kernel, which exports the necessary metrics is to use the ELRepo kernel-ml:\r\n\r\n```\r\n# import key\r\nrpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\r\n# install repository\r\nrpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm\r\n# install most current kernel-ml\r\nyum --enablerepo=elrepo-kernel install kernel-ml\r\n```\r\n\r\nReboot into newly installed kernel. Then remove the old kernels!\r\n\r\n```\r\nyum list kernel*\r\nyum erase kernel\r\n```\r\n\r\nTake care with diskless nodes. To boot into new kernel, \r\nthe file pxelinux.cfg/default has to be changed on the storage node.\r\n\r\n\r\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=1013225\r\n[2] https://www.centos.org/forums/viewtopic.php?f=48&t=54049\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}